language: python
#build_image: shippableimages/ubuntu1204_python

python:
 # - 2.6
#  - 2.7
 # - 3.2
 # - 3.3
#  - 3.4
  - 3.5
 # - pypy
  #- pypy3

install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - which python
  - coverage run `which nosetests` test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - coverage xml -o shippable/codecoverage/coverage.xml

integrations:    
  notifications:
    - integrationName: notify-slack 
      type: slack
      recipients:
        - "#random" 
        - "#rc-public" 
        - "#rc-private"
      on_start: always
      on_success: change
      on_failure: change 
      on_cancel: change
       
    - integrationName: email         
      type: email        
      recipients:  
        - shiptest.rc.ow@gmail.com
        - shiptest.rc.me@gmail.com
     # sendConsoleLogs : true
     # sendCoverageReports : true
      on_start: always
      on_success: change
      on_failure: change
      on_cancel: change
     
    - integrationName: irc  
      type: irc
      recipients:
        - "chat.freenode.net#test-rc"
        - "webchat.irchighway.net#test-rc"
      on_start: always
      on_success: change  
      on_failure: change
      on_cancel: change
    
    - integrationName: notify-hipchat
      type: hipchat
      recipients: 
        - '#rc-private'
        - '#rc-public'
        - '@shiptestrcow'
      on_start: always
      on_success: change
      on_failure: change
      on_cancel: change
